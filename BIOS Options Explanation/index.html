<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Grant Curell" /><link rel="canonical" href="https://grantcurell.github.io/BIOS%20Options%20Explanation/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>BIOS Options Explanation - Grant Curell's Dell Projects</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "BIOS Options Explanation";
        var mkdocs_page_input_path = "BIOS Options Explanation\\README.md";
        var mkdocs_page_url = "/BIOS%20Options%20Explanation/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Grant Curell's Dell Projects
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Grant Curell's Dell Projects</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Adding%20Hashing%20to%20OpenSwitch/">Adding Hashing to OpenSwitch</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Adding%20Intel%20I219-LM%20%288086.0d4c%29%20Driver%20to%20ESXi/">Adding Intel I219-LM (8086.0d4c) Driver to ESXi</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Aircraft%20Detection/">Aircraft Detection</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Automatically%20Provision%20Dell%20Servers/">Automatically Provision Dell Servers</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Automating%20OME%20Hardware%20Reports/">Automating OME Hardware Reports</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">BIOS Options Explanation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#equipment-used">Equipment Used</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#memory-settings">Memory Settings</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#helpful-resources">Helpful Resources</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dram-refresh-delay">Dram Refresh Delay</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#how-dram-is-organized">How DRAM is Organized</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#what-is-a-dram-refresh">What is a DRAM Refresh</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#trfc-and-recovery-time">tRFC and recovery time</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#refresh-penalty">Refresh Penalty</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#setting-explanation">Setting Explanation</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#performance-tuning-recommendation">Performance Tuning Recommendation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#memory-operating-mode">Memory Operating Mode</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#memory-interleaving">Memory Interleaving</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#what-is-memory-interleaving">What is Memory Interleaving</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#interleaving-on-amd-vs-intel">Interleaving on AMD vs Intel</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#optimizing-amd">Optimizing AMD</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#when-would-one-value-of-memory-interleave-size-be-chosen-versus-another">When would one value of Memory Interleave Size be chosen versus another?</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#correctable-memory-ecc-smi">Correctable Memory ECC SMI</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#performance-tuning-recommendation_1">Performance Tuning Recommendation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#correctable-error-logging">Correctable Error Logging</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#performance-tuning-recommendation_2">Performance Tuning Recommendation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#opportunistic-self-refresh">Opportunistic Self Refresh</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dimm-self-healing-post-package-repair-on-uncorrectable-memory-error">DIMM Self Healing (Post Package Repair) on Uncorrectable Memory Error</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#performance-tuning-recommendation_3">Performance Tuning Recommendation</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#processor-settings">Processor Settings</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#logical-processor">Logical Processor</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#iommu-support">IOMMU Support</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#kernel-dma-protection">Kernel DMA Protection</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#prefetching">Prefetching</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#understanding-prefetching-performance-implications">Understanding Prefetching Performance Implications</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#madt-core-enumeration">MADT Core Enumeration</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Backup%20OS10%20Config%20with%20Ansible/">Backup OS10 Config with Ansible</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Build%20NVIDIA%20AI%20Enterprise/">Build NVIDIA AI Enterprise</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Build%20OpenShift/">Build OpenShift</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Build%20Preboot%20Environment%20with%20Ansible/">Build Preboot Environment with Ansible</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CloudLink/">CloudLink</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Common%20Questions%20About%20LLMs%20Answered/">Common Questions About LLMs Answered</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Configure%20FN410%20as%20a%20Switch/">Configure FN410 as a Switch</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Configure%20Gigamon%20Tap/">Configure Gigamon Tap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Configure%20Multi-Protocol%20PowerStore%20with%20LDAP/">Configure Multi-Protocol PowerStore with LDAP</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Configure%20PowerStore%20SMB%20User/">Configure PowerStore SMB User</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Configure%20kdump%20with%20SSH/">Configure kdump with SSH</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Configuring%20VLT%20on%20OS10/">Configuring VLT on OS10</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Connect%20to%20APC%20PDU%20with%20Redfish/">Connect to APC PDU with Redfish</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Create%20Kickstart%20Server%20on%20Fedora/">Create Kickstart Server on Fedora</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Create%20OpenSwitch%20VM/">Create OpenSwitch VM</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Custom%20NVMe%20Debug%20Driver/">Custom NVMe Debug Driver</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../DHCP%20Relay%20on%20SONiC/">DHCP Relay on SONiC</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Dell%20Ansible%20Testing/">Dell Ansible Testing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Deploy%20OpenShift%20Offline/">Deploy OpenShift Offline</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Elasticsearch%20Display%20Map%20Data/">Elasticsearch Display Map Data</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Elasticsearch%20Load%20Testing/">Elasticsearch Load Testing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Estimating%20Compute%20Requirements%20for%20Machine%20Learning/">Estimating Compute Requirements for Machine Learning</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Finding%20Rare%20Logs%20with%20DBSCAN/">Finding Rare Logs with DBSCAN</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Get%20NVMe%20Drives%20from%20iDRAC%20Redfish/">Get NVMe Drives from iDRAC Redfish</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../High%20Speed%20Packet%20Capture/">High Speed Packet Capture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../How%20Bitcoin-Blockchain%20Works%20-%20Notes/">How Bitcoin-Blockchain Works - Notes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../How%20Does%20Power%20Work/">How Does Power Work</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../How%20Does%20SIFT%20Work/">How Does SIFT Work</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../How%20OS10%20Installer%20Works/">How OS10 Installer Works</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../How%20drive%20detection%20order%20works/">How drive detection order works</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../How%20to%20ONIE%20Install%20and%20ZTP%20Config%20Dell%20SONiC/">How to ONIE Install and ZTP Config Dell SONiC</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../How%20to%20Read%20lstopo%20and%20a%20PCIe%20Overview/">How to Read lstopo and a PCIe Overview</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../How%20to%20Setup%20PGP%20with%20Mailvelope/">How to Setup PGP with Mailvelope</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../IO%20Identities%20with%20LifeCycle%20Controller/">IO Identities with LifeCycle Controller</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Importing%20Elasticsearch%20Data/">Importing Elasticsearch Data</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Install%20OpenCV%20with%20CUDA%20Support%20on%20Rocky%20Linux/">Install OpenCV with CUDA Support on Rocky Linux</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Installing%20DPDK%20with%20NapaTech%20Card/">Installing DPDK with NapaTech Card</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../LDAP%20with%20OpenManage/">LDAP with OpenManage</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../LLMs%20Explained/">LLMs Explained</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Load%20Balance%20Testing%20with%20OpenVSwitch/">Load Balance Testing with OpenVSwitch</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Load%20Balancing%20on%20Mellanox%20Switches/">Load Balancing on Mellanox Switches</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Load%20Balancing%20with%20LAG%20on%205112F-ON/">Load Balancing with LAG on 5112F-ON</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Make%20USB%20Read%20Only/">Make USB Read Only</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Migrating%20Storage%20Volumes%20to%20PowerStore/">Migrating Storage Volumes to PowerStore</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Mulitple%20Span%20on%204112F-ON%20with%20OpenSwitch/">Mulitple Span on 4112F-ON with OpenSwitch</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Multiple%20Span%20on%204112F-ON%20with%20OS10/">Multiple Span on 4112F-ON with OS10</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../NVMe%20Driver%20Reverse%20Engineering/">NVMe Driver Reverse Engineering</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../NVMe%20Performance%20Testing/">NVMe Performance Testing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Notes%20on%20AMD%20Processor/">Notes on AMD Processor</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Notes%20on%20Building%20a%20Datacenter%20from%20Scratch/">Notes on Building a Datacenter from Scratch</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Notes%20on%20HPC/">Notes on HPC</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Notes%20on%20HSM/">Notes on HSM</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Notes%20on%20Improving%20Drive%20Performance/">Notes on Improving Drive Performance</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Notes%20on%20NVMe%20Log%20Pages/">Notes on NVMe Log Pages</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Notes%20on%20PCIe/">Notes on PCIe</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Notes%20on%20mdraid%20Performance%20Testing/">Notes on mdraid Performance Testing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Notes%20on%20nodejs/">Notes on nodejs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Nvidia%20GPUDirect/">Nvidia GPUDirect</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Nvidia%20GRID%20Notes/">Nvidia GRID Notes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../OME%20Bug/">OME Bug</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../OME%20Integration%20for%20VMWare/">OME Integration for VMWare</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../OS10%20Password%20Recovery%20Bug/">OS10 Password Recovery Bug</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Offline%20Updates%20with%20OpenManage%20Enterprise/">Offline Updates with OpenManage Enterprise</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../OpenFlow%20on%204112F-ON/">OpenFlow on 4112F-ON</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../OpenShift%20-%20Change%20MTU/">OpenShift - Change MTU</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Overprovisioning%20Explained/">Overprovisioning Explained</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../PCIev3%20vs%20v4/">PCIev3 vs v4</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Playing%20with%20virsh/">Playing with virsh</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../PowerScale%20-%20Configure%20with%20Kubernetes/">PowerScale - Configure with Kubernetes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../PowerScale%20Failed%20Authentication/">PowerScale Failed Authentication</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../PowerScale%20Setup/">PowerScale Setup</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Reset%20OS10%20Admin%20Password/">Reset OS10 Admin Password</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Reverse%20Engineering%20OpenSHMEM/">Reverse Engineering OpenSHMEM</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Run%20VPN%20on%20OS10/">Run VPN on OS10</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Running%20DNS%20from%20OS10/">Running DNS from OS10</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../SONiC%20-%20Sample%20Datacenter%20Automation%20Architecture/">SONiC - Sample Datacenter Automation Architecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Set%20Up%20RSPAN%20on%20OS10/">Set Up RSPAN on OS10</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Setting%20Up%20Breakout%20Cables/">Setting Up Breakout Cables</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Setting%20Up%20SmartFabric%20Director/">Setting Up SmartFabric Director</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Setting%20Up%20iDRAC%20Telemetry%20with%20Splunk/">Setting Up iDRAC Telemetry with Splunk</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Setup%20IDPA/">Setup IDPA</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Site%20to%20Site%20VPN%20with%20PFSense%20and%20CentOS%208/">Site to Site VPN with PFSense and CentOS 8</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Swap%20Kernel%20on%20Rocky%209/">Swap Kernel on Rocky 9</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Switch%20Directly%20to%20Client%20Test/">Switch Directly to Client Test</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Testing%20Bare%20Metal%20Orchestrator/">Testing Bare Metal Orchestrator</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Testing%20Intel%20x520%20on%20RHEL%206/">Testing Intel x520 on RHEL 6</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Troubleshooting%205G%20Connection/">Troubleshooting 5G Connection</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Understand%20and%20Run%20LINPACK/">Understand and Run LINPACK</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Understanding%20Cellular%20Technology/">Understanding Cellular Technology</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Understanding%20Memory/">Understanding Memory</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Understanding%20NCCL/">Understanding NCCL</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Understanding%20PERC%20Interrupts/">Understanding PERC Interrupts</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Update%20iDRAC%20Cipher%20Suite%20with%20Redfish/">Update iDRAC Cipher Suite with Redfish</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Use%20OS10%20as%20Aggregator/">Use OS10 as Aggregator</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Using%20Dell%20Repository%20Manager%20to%20Create%20Bootable%20ISO/">Using Dell Repository Manager to Create Bootable ISO</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Using%20FIO/">Using FIO</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Using%20the%20iDRAC%20Service%20Module/">Using the iDRAC Service Module</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VEP%20Testing/">VEP Testing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Web%20Traffic%20Generator/">Web Traffic Generator</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Writing%20udev%20Rules%20for%20Dell%20PERC%20H755/">Writing udev Rules for Dell PERC H755</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../esrally%20%28INCOMPLETE%29/">esrally (INCOMPLETE)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../idrac%20with%20LDAP/">idrac with LDAP</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Load%20Balance%20Testing%20on%204112F-ON/OS10/">Load Balance Testing on 4112F-ON w/OS10</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Load%20Balance%20Testing%20on%204112F-ON/OpenSwitch%20%28OPX%29/">Load Balancing with LAG OPX</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VMWare/Automate%20ESXi%20Installation/">Automating ESXi Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VMWare/Change%20User%20on%20VxRail%20Plugin/">Change User on VxRail Plugin</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VMWare/ESXi%20Architecture/">VMWare Architecture Notes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VMWare/How%20to%20Pull%20Usage%20Metrics/">How to Pull Usage Metrics</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VMWare/Notes%20on%20VSAN/">Notes on vSAN</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VMWare/Setup%20VXRail/">VxRail Setup</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VMWare/Troubleshooting%20vSAN/">Troubleshooting vSAN</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VMWare/VMWare%20APIs/">VMWare APIs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VMWare/VxRail%20Architecture%20and%20Troubleshooting/">VxRail Architecture and Troubleshooting</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../VMWare/vRealize%20Setup%20%28Incomplete%29/">Setting Up vRealize</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Grant Curell's Dell Projects</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">BIOS Options Explanation</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="bios-options-explanation">BIOS Options Explanation</h1>
<ul>
<li><a href="#bios-options-explanation">BIOS Options Explanation</a></li>
<li><a href="#equipment-used">Equipment Used</a></li>
<li><a href="#memory-settings">Memory Settings</a><ul>
<li><a href="#helpful-resources">Helpful Resources</a></li>
<li><a href="#dram-refresh-delay">Dram Refresh Delay</a></li>
<li><a href="#how-dram-is-organized">How DRAM is Organized</a></li>
<li><a href="#what-is-a-dram-refresh">What is a DRAM Refresh</a></li>
<li><a href="#trfc-and-recovery-time">tRFC and recovery time</a></li>
<li><a href="#refresh-penalty">Refresh Penalty</a></li>
<li><a href="#setting-explanation">Setting Explanation</a></li>
<li><a href="#performance-tuning-recommendation">Performance Tuning Recommendation</a></li>
<li><a href="#memory-operating-mode">Memory Operating Mode</a></li>
<li><a href="#memory-interleaving">Memory Interleaving</a></li>
<li><a href="#what-is-memory-interleaving">What is Memory Interleaving</a></li>
<li><a href="#interleaving-on-amd-vs-intel">Interleaving on AMD vs Intel</a></li>
<li><a href="#optimizing-amd">Optimizing AMD</a></li>
<li><a href="#when-would-one-value-of-memory-interleave-size-be-chosen-versus-another">When would one value of Memory Interleave Size be chosen versus another?</a></li>
<li><a href="#correctable-memory-ecc-smi">Correctable Memory ECC SMI</a></li>
<li><a href="#performance-tuning-recommendation-1">Performance Tuning Recommendation</a></li>
<li><a href="#correctable-error-logging">Correctable Error Logging</a></li>
<li><a href="#performance-tuning-recommendation-2">Performance Tuning Recommendation</a></li>
<li><a href="#opportunistic-self-refresh">Opportunistic Self Refresh</a></li>
<li><a href="#dimm-self-healing-post-package-repair-on-uncorrectable-memory-error">DIMM Self Healing (Post Package Repair) on Uncorrectable Memory Error</a></li>
<li><a href="#performance-tuning-recommendation-3">Performance Tuning Recommendation</a></li>
</ul>
</li>
<li><a href="#processor-settings">Processor Settings</a><ul>
<li><a href="#logical-processor">Logical Processor</a></li>
<li><a href="#iommu-support">IOMMU Support</a></li>
<li><a href="#kernel-dma-protection">Kernel DMA Protection</a></li>
<li><a href="#prefetching">Prefetching</a></li>
<li><a href="#understanding-prefetching-performance-implications">Understanding Prefetching Performance Implications</a></li>
<li><a href="#madt-core-enumeration">MADT Core Enumeration</a></li>
</ul>
</li>
</ul>
<h2 id="equipment-used">Equipment Used</h2>
<p>This guide was written for an R7525 with a Milan processor.</p>
<h2 id="memory-settings">Memory Settings</h2>
<h3 id="helpful-resources">Helpful Resources</h3>
<ul>
<li>A useful explanation of the different types of memory supported on PowerEdge is available <a href="https://www.dell.com/support/kbdoc/en-us/000135681/supported-memory-configuration-guide-for-poweredge-servers">here</a></li>
<li>For each PowerEdge server, you can find a description of the memory layout in the System Memory section of the service manual. For example, <a href="https://www.dell.com/support/manuals/en-us/poweredge-r7525/r7525_ism_pub/system-memory-guidelines?guid=guid-8665c17a-2613-45b2-9204-c02a89225024&amp;lang=en-us">this is the R7525's layout</a>.</li>
<li><a href="https://dl.dell.com/manuals/common/dellemc_poweredge_yx4x_memoryras_v1_0.pdf">This paper on error correction</a> by Jordan Chin, Co-Chair of the CXL Memory Systems Workgroup and memory engineering specialist at Dell</li>
</ul>
<h3 id="dram-refresh-delay">Dram Refresh Delay</h3>
<p>This setting exists due to the <a href="https://en.wikipedia.org/wiki/Row_hammer">Row Hammer</a> attack. To fully understand the explanation, it is important to first understand some memory concepts.</p>
<h4 id="how-dram-is-organized">How DRAM is Organized</h4>
<p><a href="https://electronics.stackexchange.com/a/454717/279031">This Stack Exchange post</a> does a good job explaining the difference between a DRAM rank and channel. <a href="https://my.eng.utah.edu/~cs7810/pres/11-7810-12.pdf">Page 3 of this lecture</a> from the University of Utah provides a visual of DRAM organization.</p>
<h4 id="what-is-a-dram-refresh">What is a DRAM Refresh</h4>
<p>Source: https://utaharch.blogspot.com/2013/11/a-dram-refresh-tutorial.html</p>
<blockquote>
<p>The charge on a DRAM cell weakens over time.  The DDR standard requires every cell to be refreshed within a 64 ms interval, referred to as the retention time.  At temperatures higher than 85° C (referred to as extended temperature range), the retention time is halved to 32 ms to account for the higher leakage rate.  The refresh of a memory rank is partitioned into 8,192 smaller refresh operations.  One such refresh operation has to be issued every 7.8 µs (64 ms/8192).  This 7.8 µs interval is referred to as the refresh interval, tREFI.  The DDR3 standard requires that eight refresh operations be issued within a time window equal to 8 x tREFI, giving the memory controller some flexibility when scheduling these refresh operations.  Refresh operations are issued at rank granularity in DDR3 and DDR4.  Before issuing a refresh operation, the memory controller precharges all banks in the rank.  It then issues a single refresh command to the rank.  DRAM chips maintain a row counter to keep track of the last row that was refreshed -- this row counter is used to determine the rows that must be refreshed next.</p>
</blockquote>
<h4 id="trfc-and-recovery-time">tRFC and recovery time</h4>
<p>Source: https://utaharch.blogspot.com/2013/11/a-dram-refresh-tutorial.html</p>
<blockquote>
<p>Upon receiving a refresh command, the DRAM chips enter a refresh mode that has been carefully designed to perform the maximum amount of cell refresh in as little time as possible.  During this time, the current carrying capabilities of the power delivery network and the charge pumps are stretched to the limit.  The operation lasts for a time referred to as the refresh cycle time, tRFC.  Towards the end of this period, the refresh process starts to wind down and some recovery time is provisioned so that the banks can be precharged and charge is restored to the charge pumps.  Providing this recovery time at the end allows the memory controller to resume normal operation at the end of tRFC.  Without this recovery time, the memory controller would require a new set of timing constraints that allow it to gradually ramp up its operations in parallel with charge pump restoration.  Since such complexity can't be expected of every memory controller, the DDR standards include the recovery time in the tRFC specification.  As soon as the tRFC time elapses, the memory controller can issue four consecutive Activate commands to different banks in the rank.</p>
</blockquote>
<h4 id="refresh-penalty">Refresh Penalty</h4>
<p>Source: https://utaharch.blogspot.com/2013/11/a-dram-refresh-tutorial.html</p>
<blockquote>
<p>On average, in every tREFI window, the rank is unavailable for a time equal to tRFC.  So for a memory-bound application on a 1-rank memory system, the percentage of execution time that can be attributed to refresh (the refresh penalty) is tRFC/tREFI.  In reality, the refresh penalty can be a little higher because directly prior to the refresh operation, the memory controller wastes some time precharging all the banks.  Also, right after the refresh operation, since all rows are closed, the memory controller has to issue a few Activates to re-populate the row buffers.  These added delays can grow the refresh penalty from (say) 8% in a 32 Gb chip to 9%.  The refresh penalty can also be lower than the tRFC/tREFI ratio if the processors can continue to execute independent instructions in their reorder buffers while the memory system is unavailable.  In a multi-rank memory system, the refresh penalty depends on whether ranks are refreshed together or in a staggered manner.  If ranks are refreshed together, the refresh penalty, as above, is in the neighborhood of tRFC/tREFI.  If ranks are refreshed in a staggered manner, the refresh penalty can be greater.  Staggered refresh is frequently employed because it reduces the memory's peak power requirement.</p>
</blockquote>
<h4 id="setting-explanation">Setting Explanation</h4>
<p>Every time a row in DRAM is refreshed, it ‘wipes the slate clean’ in terms of Rowhammer induced electrical disturbances. However, when a DRAM row is being refreshed, it cannot be accessed to read/write data – so it is momentarily offline. The JEDEC specification for DDR4 and DDR5 allows the CPU memory controller to postpone sending DRAM refreshes. The memory controller is required to ‘catch up’ in refreshes at a later time. The theory is that some workloads may see additional performance benefits by ‘squeezing in’ read/write transactions during the window where refreshes is not occurring.</p>
<p>In this timing diagram below, you can see there is a window where refresh is postponed (and later caught-up by sending a burst of refreshes). The theory on RH mitigation is that the window you see below allows a ‘window of opportunity’ for Row Hammer attackers to induce bitflips. ‘Performance mode’ of the Dram Refresh Delay setting allows the memory controller to do this postponing.</p>
<p><strong>Grant Note: I somehow lost the image for this.</strong></p>
<p>By changing the BIOS setting mentioned, it forces the memory controller to send refreshes at regular intervals. Therefore, the ‘window of opportunity’ closes.</p>
<p><strong>Grant Note: I somehow lost the image for this.</strong></p>
<p>Dell's testing has showed that there is &lt;1% performance benefit to allowing refresh postponed. Subsequently, starting in 15G, Dell started disabling refresh postponing/delay by default.</p>
<h4 id="performance-tuning-recommendation">Performance Tuning Recommendation</h4>
<p>From a performance tuning standpoint, our experience shows us that this setting is not significant and can be left at the "Minimum" setting.</p>
<h3 id="memory-operating-mode">Memory Operating Mode</h3>
<blockquote>
<p>This field selects the memory operating mode. This feature is active only if a valid memory configuration is detected. When Optimizer Mode is enabled, the DRAM controllers operate independently in 64-bit mode and provide optimized memory performance.</p>
</blockquote>
<p>On AMD platforms this memory setting is not applicable. On Intel platforms the memory operating mode field allows you to enable memory mirroring, fault resilient memory (FRM) mode, or use memory sparing. These features aren't currently on AMD platform but the setting is still present in the BIOS (though locked).</p>
<h3 id="memory-interleaving">Memory Interleaving</h3>
<h4 id="what-is-memory-interleaving">What is Memory Interleaving</h4>
<p>The memory interleave size is the amount of data written/read to a single memory channel before the CPU moves to the next channel.  This is done through memory addressing, so that addresses are mapped to certain channels based on the setting.  If you wrote a 1K byte block with the interleave size set to 256 bytes, that data would be spread across 4 difference memory channels/DIMMs.  If you had the setting at 2K bytes, that data would all end up on a single DIMM.</p>
<h4 id="interleaving-on-amd-vs-intel">Interleaving on AMD vs Intel</h4>
<p>In current gen processors, at time of writing Dell 15G Milan (AMD)/Icelake (Intel), there is a significant difference between AMD and Intel. AMD includes a setting called NUMAs Per Core (NPS)which affects interleaving. When NPS is anything more than 1 instead of distributing each increment of the interleave size across different channels it will move between each of the NUMA nodes and channels.</p>
<p>NPS is not a consideration on Intel servers.</p>
<h4 id="optimizing-amd">Optimizing AMD</h4>
<p><a href="https://www.amd.com/content/dam/amd/en/documents/epyc-technical-docs/other/56873_0_80_PUB.pdf">AMD's Guidelines on Memory Population</a></p>
<p>If you are looking to maximize performance, first it is key to populate all 16 DIMMs. AMD processors each have 8 channels and each channel may contain two DIMMs. You can think of interleaving as a sort of load balancing and as with most load balancing scenarios the more you spread the load the faster it goes. Subsequently, if you're looking for maximum performance here having 16 DIMMs is optimum. Equally important is making sure that all memory is the same size.</p>
<p>An exhaustive list of the memory configurations are available in <a href="https://www.amd.com/system/files/TechDocs/56873_0.80_PUB.pdf">the guidelines</a>. </p>
<h4 id="when-would-one-value-of-memory-interleave-size-be-chosen-versus-another">When would one value of Memory Interleave Size be chosen versus another?</h4>
<p>In general, you should leave the memory interleave size at 256 bytes.  We don’t know of any real-world workloads where it makes a significant difference.</p>
<p>TODO: If you knew that the data read woud be consistently large is this worth exploring?</p>
<p>You could see a difference in synthetic workloads that only use a small address range for their testing. For example, if only 1K of data is accessed you would be MUCH better off with the 256 byte interleaving than the 2K setting in the example above.</p>
<h3 id="correctable-memory-ecc-smi">Correctable Memory ECC SMI</h3>
<p>Allows the system to log ECC corrected DRAM errors into the System Event Log (SEL) log. Logging these rare errors can help identify marginal components; however the system will pause for a few milliseconds after an error while the log entry is created. Latency conscious customers may wish to disable the feature. Spare Mode, and Mirror mode require this feature to be enabled.</p>
<h4 id="performance-tuning-recommendation_1">Performance Tuning Recommendation</h4>
<p>This is a judgement call: if strictly improving performance is your only aim we suggest disabling it though the performance improvements are not substantial. Keeping it enabled will, as the description mentions, allow you to notice if a DIMM is going bad.</p>
<h3 id="correctable-error-logging">Correctable Error Logging</h3>
<p>Some correctable errors in modern RAM are unavoidable. See <a href="https://dl.dell.com/manuals/common/dellemc_poweredge_yx4x_memoryras_v1_0.pdf">page 3 of this paper</a>. </p>
<blockquote>
<p>Correctable errors are errors that can be detected and corrected by the server platform. These are typically single-bit errors, though based on CPU and memory configuration, may also be some types of multi-bit errors (corrected by Advanced ECC). Correctable errors can be caused by both soft and hard errors and will not disrupt operation of PowerEdge servers.
As DRAM based memory shrinks in geometry to grow in capacity, an increasing number of correctable errors are expected to occur as a natural part of uniform scaling. Additionally, due to various other DRAM scaling factors (e.g. decreasing cell capacitance) there is an expected increase in the number of error generating phenomenon such as Variable Retention Time (VRT) [1] and Random Telegraph Noise (RTN) [2].
Within the server industry, it is an increasingly accepted understanding shared by Dell that some correctable errors per DIMM is unavoidable and does not inherently warrant  4 Memory Errors and Dell PowerEdge YX4X Server Memory RAS Features a memory module replacement. However, some server competitors will go as far as to say that an indefinite number of correctable errors are acceptable – a belief that is not shared by Dell Engineering. Instead, PowerEdge server firmware will intelligently monitor the health of memory and recommend self-healing action or module replacement based on a variety of factors including DIMM capacity, rates of correctable errors, and effectiveness of available self-healing. The intent behind Dell’s proprietary predictive failure algorithms is to proactively identify DIMMs that are most likely to continue to degrade and potentially generate uncorrectable errors. </p>
</blockquote>
<p>In previous generation servers we would log any and all errors generated by the RAM which would lead to a <a href="https://www.dell.com/support/kbdoc/en-us/000053203/what-is-ddr4-self-healing-on-dell-poweredge-servers-with-intel-xeon-scalable-processors">"self-healing" event</a>. These events would trigger memory retraining on reboot, often unnecessarily. This setting allows you to force enable logging for these errors.</p>
<h4 id="performance-tuning-recommendation_2">Performance Tuning Recommendation</h4>
<p>Leave this to disabled.</p>
<h3 id="opportunistic-self-refresh">Opportunistic Self Refresh</h3>
<p>Only applies to Intel. Can be ignored on AMD servers and on newer servers should not be present at all.</p>
<h3 id="dimm-self-healing-post-package-repair-on-uncorrectable-memory-error">DIMM Self Healing (Post Package Repair) on Uncorrectable Memory Error</h3>
<p>This description was taken from <a href="https://dl.dell.com/manuals/common/dellemc_poweredge_yx4x_memoryras_v1_0.pdf">page 12 of this paper</a>.</p>
<p>Post Package Repair (PPR) is an industry-standard capability, defined by JEDEC, where a memory module is capable of swapping out degraded rows of memory with spare ones being held in reserve. While JEDEC requires that all DDR4 memory be built with at least one spare row per DRAM bank group, Dell requires all memory suppliers manufacture genuine Dell DIMMs with a significantly larger number of available spare rows. This is done to ensure that PowerEdge servers have a robust self-healing memory ecosystem.</p>
<p>When the server platform determines that a DRAM row has one or more faulty cells, it can instruct the DRAM to electrically swap out the old row and replace it with a new one. This happens through electrical fusing and is a permanent process. Additionally, the PPR process can only occur at the beginning of a boot process – before memory training and test can occur. Similar to Memory Page Retirement, deeming which DRAM require Post Package Repair is determined by a proprietary Dell algorithm that takes into account correctable error rates and error patterns.</p>
<p><strong>Grant Note: I somehow lost the image for this.</strong></p>
<p>PPR is always available on PowerEdge server platforms that support it and will automatically execute after a system reboot if BIOS deems it necessary. Note that BIOS may automatically promote a warm reset to a cold reset during this process. In order for PPR to successfully execute, it is recommended that
users do not swap or replace DIMMs between boots when receiving memory error event messages, unless instructed to do so by Dell technical support personnel.
In addition to PPR, the PowerEdge server memory self-healing process also includes memory re-training. Memory training is the process by which the CPU initializes, calibrates, and tunes the link between itself and the memory modules. [Grant's note: the memory signaling can change for a variety of reasons: ambient temperature, humidity, or in this case - a change in the memory.] While performing full memory training can help to ensure that the memory
bus operates at the highest level of signaling integrity, it is also a time-consuming process that directly impacts server boot times. Therefore, PowerEdge servers only perform this step when necessary, such as during the memory self-healing process.</p>
<h4 id="performance-tuning-recommendation_3">Performance Tuning Recommendation</h4>
<p>Leave this enabled. It will only run when an uncorrectable memory error occurs which is rare.</p>
<h2 id="processor-settings">Processor Settings</h2>
<h3 id="logical-processor">Logical Processor</h3>
<p>This controls hyper threading/simultaneous multithreading (SMT). Many years ago there was wisdom saying that you should turn off SMT because the performance benefits were minimal and operating systems would schedule tasks on logical cores instead of available physical cores. With time all major operating systems rewrote their schedulers to be aware of SMT and performance has significantly increased. In the vast majority of workloads, SMT is beneficial. However, it works by sharing the resources of one physical CPU core between two logical CPUs. Those two logical CPUs share resources and the idea is that whenever one thread or another is briefly idle the other can take advantage of the CPU resources. However, in some instances, ex: databases, threads stay busy resulting in competition and a degradation of performance. <a href="https://docs.oracle.com/cd/E95618_01/html/sbc_scz810_installation/GUID-F2C27A7A-D173-4655-99C5-D1E367DDF2A8.htm">Oracle is an example of this</a>. If you think you may be in this scenario it is worth benchmarking with and without SMT to see which performs better.</p>
<h3 id="iommu-support">IOMMU Support</h3>
<p>The IOMMU is required to support Direct Memory Access (DMA). Unless you have a use-case specific reason, this is best left on. On AMD systems, it enables the <a href="https://www.amd.com/system/files/TechDocs/48882_3.07_PUB.pdf">IVRS ACPI table</a> used to support DMA for VMs.</p>
<h3 id="kernel-dma-protection">Kernel DMA Protection</h3>
<p>This is there to protect against <a href="https://en.wikipedia.org/wiki/DMA_attack">DMA Attacks</a>. Originally, PCIe devices were entirely external and usually required a reboot to enable. However, in modern computers you often have things like Thunderbolt. An attacker can plug in a Thunderbolt device and then use DMA to read arbitrary memory. <a href="https://learn.microsoft.com/en-us/windows/security/information-protection/kernel-dma-protection-for-thunderbolt">Kernel DMA Protection</a> protects against this by rejecting any devices which don't support memory access protection. This is done by the IOMMU and it effectively forces the device to honor memory access protection in order to function. With memory access protection the device is only allowed to access its own memory space.</p>
<h3 id="prefetching">Prefetching</h3>
<p>There are two prefetch settings you can control L1 and L2. The merits of prefetching or not prefetching are a deep and complicated subject. <a href="https://faculty.cc.gatech.edu/~hyesoon/lee_taco12.pdf">This paper</a> does a good job of getting into the weeds on when it is worth it and when it isn't. In general, whether prefetching is valuable is extremely workload dependent. Well optimized workloads will be compiled with prefetch instructions specific to it.</p>
<p>In general, there are two types of prefetching - hardware and software. <a href="http://www.nic.uoregon.edu/~khuck/ts/acumem-report/manual_html/ch_intro_prefetch.html">This book</a> has a good deep dive and there is also a <a href="https://en.wikipedia.org/wiki/Cache_prefetching#Hardware_vs._software_cache_prefetching">Wikipedia Article</a>.</p>
<p><strong>Software Prefetching</strong></p>
<p>Software prefetching is when the programmer or compiler adds instructions to the program. These instructions then load the cache line into cache, but will not stall the thread while waiting for it to load. In this way, the programmer directly controls what is and isn't prefetched. The goal is to prefetch the data long enough before its usage such that it is available at the time of execution, but not so longe before that the data is evicted and then must be reloaded. An intuitive example of where this is helpful is in loops where the compiler can see that something will imminently be loaded.</p>
<p><strong>Hardware Prefetching</strong></p>
<p>Hardware prefetches are, as the name implies, implemented in hardware. There are many different <a href="https://en.wikipedia.org/wiki/Cache_prefetching#Methods_of_hardware_prefetching">types of hardware prefetching</a>.</p>
<ul>
<li>Stream buffer: If there is a cache miss, fetch the missed block <em>and</em> several of the surrounding blocks under the assumption that data you want is typically close together in memory.</li>
<li>Strided prefetching: Watch for patterns in memory accesses and fetch based on those patterns. Ex: If A is fetched, immediately followed by B, starting prefetching B with A.</li>
<li>Temporal prefetching: Watch for memory access patterns over time</li>
</ul>
<h4 id="understanding-prefetching-performance-implications">Understanding Prefetching Performance Implications</h4>
<p>I found <a href="https://faculty.cc.gatech.edu/~hyesoon/lee_taco12.pdf#page=2">page 2 of this study to be particularly helpful</a>. The graph is a bit confusing at first but it illustrates testing different workloads with and without hardware prefetch enabled. Here are some notes on how to interpret it:</p>
<ul>
<li>SW refers to software prefetch but only in the context of a programmer manually interceding and creating prefetch rules specific to the workload</li>
<li>Base also refers to software prefetch but only the default compiler optimizations (the study used <code>icc</code> compiler)</li>
<li>GHB is an acornym for Global History Buffer</li>
<li>The right axis only applies to the black tickmark</li>
<li>The black tickmark describes the ratio of the best performing combination of SW, SW+GHB, SW+STR vs the best performing hardware prefetch scheme <strong>alone</strong> or compiler optimizations only.</li>
<li>Positive means that the performance of SW/SW+GHB/SW+STR outperformed base/GHB/STR by the ratio indicate on the right axis. Neutral means it was a tie. Negative means that SW/SW+GHB/SW+STR was worse than base/GHB/STR.</li>
</ul>
<p><a href="https://faculty.cc.gatech.edu/~hyesoon/lee_taco12.pdf#page=5">Section 3</a> of the paper discusses the positive and negative impacts of prefetching. It is worth exploring these to get some notion of how your workload may perform. However, nothing beats benchmarking.</p>
<p>From an options perspective, you can both enable and disable L1 and L2 prefetching. The options simply let you turn hardware caching at both levels on and off.</p>
<h3 id="madt-core-enumeration">MADT Core Enumeration</h3>
<p>https://learn.microsoft.com/en-us/windows-hardware/drivers/bringup/acpi-system-description-tables</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Automating%20OME%20Hardware%20Reports/" class="btn btn-neutral float-left" title="Automating OME Hardware Reports"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Backup%20OS10%20Config%20with%20Ansible/" class="btn btn-neutral float-right" title="Backup OS10 Config with Ansible">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="None" class="fa fa-code-fork" style="color: #fcfcfc"> https://github.com/grantcurell/grantcurell.github.io/tree/master</a>
        </span>
    
    
      <span><a href="../Automating%20OME%20Hardware%20Reports/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Backup%20OS10%20Config%20with%20Ansible/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
